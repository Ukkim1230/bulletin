<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>주사랑교회 청년부 주보</title>
    
    <!-- PWA 메타 태그 -->
    <meta name="description" content="주사랑교회 청년부를 위한 모바일 주보 앱">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="청년부 주보">
    
    <!-- 매니페스트 -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- 파비콘 (기본 브라우저 아이콘 사용) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- 공통 스타일 -->
    <th:block th:replace="~{fragments/styles :: styles}"></th:block>
    <th:block th:replace="~{fragments/bulletin-viewer :: bulletin-styles}"></th:block>

    <script>
        // QR 모달 관련 함수
        function openQRModal() {
            document.getElementById('qrModal').style.display = 'flex';
        }

        function closeQRModal() {
            document.getElementById('qrModal').style.display = 'none';
        }

        function shareQRCode() {
            // 현재 페이지 URL 사용
            const url = window.location.origin;
            console.log('공유할 URL:', url);
            
            if (navigator.share) {
                navigator.share({
                    title: '주사랑교회 청년부 주보',
                    text: '주사랑교회 청년부 디지털 주보를 확인하세요!',
                    url: url
                })
                .then(() => {
                    console.log('공유 성공');
                    alert('공유가 완료되었습니다!');
                })
                .catch((error) => {
                    console.log('공유 실패:', error);
                    // 공유 실패 시 클립보드 복사로 대체
                    copyToClipboard(url);
                });
            } else {
                // 공유 API가 지원되지 않는 경우 URL 복사
                copyToClipboard(url);
            }
        }
        
        function copyToClipboard(text) {
            if (navigator.clipboard && window.isSecureContext) {
                // HTTPS 환경에서 클립보드 API 사용
                navigator.clipboard.writeText(text)
                    .then(() => {
                        alert('주소가 클립보드에 복사되었습니다!');
                    })
                    .catch(err => {
                        console.error('클립보드 복사 실패:', err);
                        fallbackCopyTextToClipboard(text);
                    });
            } else {
                // HTTP 환경에서 fallback 방법 사용
                fallbackCopyTextToClipboard(text);
            }
        }
        
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    alert('주소가 클립보드에 복사되었습니다!');
                } else {
                    alert('주소 복사에 실패했습니다. 직접 복사해주세요: ' + text);
                }
            } catch (err) {
                console.error('Fallback 복사 실패:', err);
                alert('주소 복사에 실패했습니다. 직접 복사해주세요: ' + text);
            }
            document.body.removeChild(textArea);
        }

        // 모달 오버레이 클릭으로 닫기
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('qrModal');
            if (event.target === modal) {
                closeQRModal();
            }
        });

        // ESC 키로 모달 닫기
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('qrModal');
                if (modal.style.display === 'flex') {
                    closeQRModal();
                }
            }
        });
    </script>
</head>
<body>
    <!-- 헤더 -->
    <th:block th:replace="~{fragments/header :: header(${currentDate})}"></th:block>

    <!-- 메인 컨텐츠 영역 -->
    <main id="mainContent" class="container-fluid px-3 py-3 pb-5">
        <!-- 홈 탭 컨텐츠 -->
        <div id="homeTab" class="tab-content">
            <!-- 교회 정보 -->
            <th:block th:replace="~{fragments/church-info :: church-info}"></th:block>

            <!-- 주보 보기 버튼 -->
            <section class="mb-4">
                <button onclick="openBulletinViewer()" class="btn btn-primary w-100 py-3 d-flex align-items-center justify-content-center gap-2" style="font-size: 1.125rem; font-weight: 600; border-radius: 12px; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); border: none;">
                    <i class="fas fa-book-open"></i>
                    <span>주보 보기</span>
                </button>
            </section>

        <!-- 청년부 예배 일정 -->
        <section id="schedule" class="p-4" style="background: var(--muted); background-opacity: 0.3;">
            <button onclick="toggleSection('scheduleContent')" class="w-100 mb-4 d-flex align-items-center justify-content-between group" style="background: none; border: none; padding: 0;">
                <div class="text-start">
                    <h2 class="h5 fw-bold mb-1 group-hover" style="color: var(--foreground); transition: color 0.2s;">청년부 예배 일정</h2>
                    <p style="font-size: 0.875rem; color: var(--muted-foreground);">주차별로 다양한 형태의 예배와 모임을 진행해요</p>
                </div>
                <i class="fas fa-chevron-down" id="scheduleIcon" style="color: var(--muted-foreground); transition: transform 0.3s;"></i>
            </button>
            
            <div id="scheduleContent" class="accordion-content" style="max-height: 0; overflow: hidden; opacity: 0; transition: all 0.5s ease-in-out;">

            <div class="d-flex flex-column gap-3">
                <!-- 1주차: 청년주관 오후예배 -->
                <div class="card" style="border: 1px solid var(--border); border-opacity: 0.5; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-2">
                                    <h3 class="fw-semibold mb-0" style="color: white;">1주차: 청년주관 오후예배</h3>
                                    <span class="badge px-2 py-1 rounded-pill" style="font-size: 0.75rem; background: rgba(255,255,255,0.2); color: white;">매월 첫째주</span>
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-clock" style="width: 1rem; height: 1rem;"></i>
                                        <span>오후 2:00</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-map-marker-alt" style="width: 1rem; height: 1rem;"></i>
                                        <span>2층 예배당</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <i class="fas fa-users" style="font-size: 2rem; color: rgba(255,255,255,0.3);"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2주차: 청년부 자체 예배 -->
                <div class="card" style="border: 1px solid var(--border); border-opacity: 0.5;">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-2">
                                    <h3 class="fw-semibold mb-0" style="color: var(--foreground);">2주차: 청년부 자체 예배</h3>
                                    <span class="badge px-2 py-1 rounded-pill" style="font-size: 0.75rem; background: var(--secondary); background-opacity: 0.8; color: var(--secondary-foreground);">매월 둘째주</span>
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: var(--muted-foreground);">
                                        <i class="fas fa-clock" style="width: 1rem; height: 1rem;"></i>
                                        <span>오후 1:00</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: var(--muted-foreground);">
                                        <i class="fas fa-map-marker-alt" style="width: 1rem; height: 1rem;"></i>
                                        <span>지하1층 중고등부실</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <p class="mb-0" style="font-size: 0.875rem; color: var(--muted-foreground);">예배</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3주차: 청년부 자체 예배 -->
                <div class="card" style="border: 1px solid var(--border); border-opacity: 0.5;">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-2">
                                    <h3 class="fw-semibold mb-0" style="color: var(--foreground);">3주차: 청년부 자체 예배</h3>
                                    <span class="badge px-2 py-1 rounded-pill" style="font-size: 0.75rem; background: var(--secondary); background-opacity: 0.8; color: var(--secondary-foreground);">매월 셋째주</span>
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: var(--muted-foreground);">
                                        <i class="fas fa-clock" style="width: 1rem; height: 1rem;"></i>
                                        <span>오후 1:00</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: var(--muted-foreground);">
                                        <i class="fas fa-map-marker-alt" style="width: 1rem; height: 1rem;"></i>
                                        <span>지하1층 중고등부실</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <p class="mb-0" style="font-size: 0.875rem; color: var(--muted-foreground);">예배</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 4주차: 청년부 자체 기도회 -->
                <div class="card" style="border: 1px solid var(--border); border-opacity: 0.5; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-2">
                                    <h3 class="fw-semibold mb-0" style="color: white;">4주차: 청년부 자체 기도회</h3>
                                    <span class="badge px-2 py-1 rounded-pill" style="font-size: 0.75rem; background: rgba(255,255,255,0.2); color: white;">매월 넷째주</span>
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-clock" style="width: 1rem; height: 1rem;"></i>
                                        <span>오후 1:00</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-map-marker-alt" style="width: 1rem; height: 1rem;"></i>
                                        <span>지하1층 중고등부실</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <i class="fas fa-church" style="font-size: 2rem; color: rgba(255,255,255,0.3);"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 5주차: 애찬모임 -->
                <div class="card" style="border: 1px solid var(--border); border-opacity: 0.5; background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-2">
                                    <h3 class="fw-semibold mb-0" style="color: white;">5주차: 애찬모임</h3>
                                    <span class="badge px-2 py-1 rounded-pill" style="font-size: 0.75rem; background: rgba(255,255,255,0.2); color: white;">5주차가 있는 달</span>
                                </div>
                                <div class="d-flex flex-column gap-1">
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-clock" style="width: 1rem; height: 1rem;"></i>
                                        <span>오후 1:00</span>
                                    </div>
                                    <div class="d-flex align-items-center gap-2" style="font-size: 0.875rem; color: rgba(255,255,255,0.9);">
                                        <i class="fas fa-utensils" style="width: 1rem; height: 1rem;"></i>
                                        <span>공지 확인</span>
                                    </div>
                                </div>
                            </div>
                            <div class="text-end">
                                <i class="fas fa-heart" style="font-size: 2rem; color: rgba(255,255,255,0.3);"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 안내 메시지 -->
            <div class="mt-4 p-3 rounded-3" style="background: var(--accent); background-opacity: 0.5;">
                <div class="d-flex align-items-start gap-3">
                    <i class="fas fa-info-circle" style="color: var(--primary); margin-top: 0.125rem;"></i>
                    <div>
                        <p class="fw-medium mb-1" style="color: var(--foreground); font-size: 0.875rem;">📅 주차별 예배 안내</p>
                        <p class="mb-0" style="color: var(--muted-foreground); font-size: 0.75rem; line-height: 1.4;">
                            매월 주차에 따라 다른 형태의 예배와 모임을 진행합니다. 자세한 일정은 청년부 단체 채팅방을 확인해주세요!
                        </p>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- 성경구절 -->
        <section class="p-4 mb-3" th:if="${not #lists.isEmpty(bulletin.bibleVerses)}" style="background: var(--muted); background-opacity: 0.3;">
            <button onclick="toggleSection('bibleContent')" class="w-100 mb-4 d-flex align-items-center justify-content-between group" style="background: none; border: none; padding: 0;">
                <div class="text-start">
                    <h2 class="h5 fw-bold mb-1 group-hover" style="color: var(--foreground); transition: color 0.2s;">성경구절</h2>
                    <p style="font-size: 0.875rem; color: var(--muted-foreground);">하나님의 말씀을 함께 나눠요</p>
                </div>
                <i class="fas fa-chevron-down" id="bibleIcon" style="color: var(--muted-foreground); transition: transform 0.3s;"></i>
            </button>
            
            <div id="bibleContent" class="accordion-content" style="max-height: 0; overflow: hidden; opacity: 0; transition: all 0.5s ease-in-out;">
                <div th:each="verse : ${bulletin.bibleVerses}">
                    <div class="card mb-3" style="border: 1px solid var(--border); border-opacity: 0.5;">
                        <div class="card-body p-4">
                            <h6 class="mb-2">
                                <i class="fas fa-bible me-2" style="color: var(--primary);"></i>
                                <span th:text="${verse.verseReference}" style="color: var(--foreground);">요한복음 3:16</span>
                            </h6>
                            <p class="mb-0" th:text="${verse.verseText}" style="color: var(--muted-foreground); line-height: 1.6;">하나님이 세상을 이처럼 사랑하사...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 교회 소식 (Announcements) -->
        <section class="p-4">
            <button onclick="toggleSection('announcementsContent')" class="w-100 mb-4 d-flex align-items-center justify-content-between group" style="background: none; border: none; padding: 0;">
                <div class="text-start">
                    <h2 class="h5 fw-bold mb-1 group-hover" style="color: var(--foreground); transition: color 0.2s;">교회 소식</h2>
                    <p style="font-size: 0.875rem; color: var(--muted-foreground);">교회의 중요한 소식들을 확인하세요</p>
                </div>
                <i class="fas fa-chevron-down" id="announcementsIcon" style="color: var(--muted-foreground); transition: transform 0.3s;"></i>
            </button>
            
            <div id="announcementsContent" class="accordion-content" style="max-height: 0; overflow: hidden; opacity: 0; transition: all 0.5s ease-in-out;">
                <!-- 소식 추가 버튼 -->
                <div class="mb-4">
                    <button onclick="openAddAnnouncementDialog()" class="btn btn-outline-primary w-100 d-flex align-items-center justify-content-center gap-2" style="border: 2px dashed var(--border); background: transparent; color: var(--primary); padding: 1rem;">
                        <i class="fas fa-plus"></i>
                        <span>소식 추가</span>
                    </button>
                </div>

            <div class="d-flex flex-column gap-3" th:if="${not #lists.isEmpty(bulletin.announcements)}">
                <div class="card border-0 shadow-sm" 
                     style="border: 1px solid var(--border); border-opacity: 0.5; transition: box-shadow 0.2s ease; cursor: pointer;"
                     onmouseover="this.style.boxShadow='0 4px 6px -1px rgba(0, 0, 0, 0.1)'; this.style.transform='scale(1.02)'"
                     onmouseout="this.style.boxShadow='0 1px 3px 0 rgba(0, 0, 0, 0.1)'; this.style.transform='scale(1)'"
                     th:onclick="'viewAnnouncement(' + ${announcement.id} + ')'"
                     th:data-id="${announcement.id}"
                     th:each="announcement : ${bulletin.announcements}">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start gap-3">
                            <!-- 아이콘 -->
                            <div class="flex-shrink-0 d-flex align-items-center justify-content-center rounded-2"
                                 style="width: 40px; height: 40px; background: var(--primary); background-opacity: 0.1;">
                                <i class="fas fa-heart" style="color: var(--primary); font-size: 1.25rem;"></i>
                            </div>

                            <!-- 내용 -->
                            <div class="flex-grow-1 min-width-0">
                                <div class="d-flex align-items-center gap-2 mb-1">
                                    <h3 class="fw-semibold mb-0" style="font-size: 0.875rem; color: var(--foreground);" th:text="${announcement.title}">새가족 환영식</h3>
                                    <span class="badge text-white px-2 py-0" 
                                          style="font-size: 0.75rem; background: var(--destructive);" 
                                          th:if="${announcement.isImportant}">중요</span>
                                    <span class="badge px-2 py-0" 
                                          style="font-size: 0.75rem; background: var(--secondary); color: var(--secondary-foreground);">행사</span>
                                </div>

                                <p class="mb-2" style="font-size: 0.875rem; color: var(--muted-foreground); line-height: 1.5;" 
                                   th:text="${announcement.content}">3월 26일(일) 오후 2시 새가족을 위한 환영식이 있습니다. 많은 참여 부탁드립니다.</p>

                                <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);" 
                                   th:text="${#temporals.format(announcement.announcementDate, 'yyyy.MM.dd')}">2024.03.19</p>
                            </div>
                            
                            <!-- 편집/삭제 버튼 -->
                            <div class="d-flex gap-1" onclick="event.stopPropagation()">
                                <button th:onclick="'openEditAnnouncementDialog(' + ${announcement.id} + ')'" 
                                        th:data-id="${announcement.id}"
                                        class="btn btn-sm btn-outline-secondary" 
                                        style="width: 32px; height: 32px; padding: 0; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-edit" style="font-size: 0.75rem;"></i>
                                </button>
                                <button th:onclick="'deleteAnnouncement(' + ${announcement.id} + ')'" 
                                        th:data-id="${announcement.id}"
                                        class="btn btn-sm btn-outline-danger" 
                                        style="width: 32px; height: 32px; padding: 0; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-trash" style="font-size: 0.75rem;"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </section>

        <!-- 연락처 & 오시는 길 (Contact) -->
        <section class="p-4" style="background: var(--muted); background-opacity: 0.3;">
            <button onclick="toggleSection('contactContent')" class="w-100 mb-4 d-flex align-items-center justify-content-between group" style="background: none; border: none; padding: 0;">
                <div class="text-start">
                    <h2 class="h5 fw-bold mb-1 group-hover" style="color: var(--foreground); transition: color 0.2s;">연락처 & 오시는 길</h2>
                    <p style="font-size: 0.875rem; color: var(--muted-foreground);">교회 정보와 찾아오는 방법</p>
                </div>
                <i class="fas fa-chevron-down" id="contactIcon" style="color: var(--muted-foreground); transition: transform 0.3s;"></i>
            </button>
            
            <div id="contactContent" class="accordion-content" style="max-height: 0; overflow: hidden; opacity: 0; transition: all 0.5s ease-in-out;">

            <!-- 연락처 정보 -->
            <div class="card mb-4" style="border: 1px solid var(--border); border-opacity: 0.5;">
                <div class="card-body p-4">
                    <h3 class="fw-semibold mb-3" style="color: var(--foreground);">연락처 정보</h3>
                    <div class="d-flex flex-column gap-3">
                        <!-- 전화번호 -->
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center gap-3">
                                <div class="d-flex align-items-center justify-content-center rounded-2" 
                                     style="width: 2rem; height: 2rem; background: var(--primary); background-opacity: 0.1;">
                                    <i class="fas fa-phone" style="font-size: 1rem; color: var(--primary);"></i>
                                </div>
                                <div>
                                    <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);">전화번호</p>
                                    <p class="mb-0 fw-medium" style="font-size: 0.875rem; color: var(--foreground);">010-5240-7719</p>
                                </div>
                            </div>
                            <a href="tel:02-1234-5678" class="btn btn-outline-primary btn-sm">연결</a>
                        </div>
                        <!-- 주소 -->
                        <div class="d-flex align-items-center justify-content-between">
                            <div class="d-flex align-items-center gap-3">
                                <div class="d-flex align-items-center justify-content-center rounded-2" 
                                     style="width: 2rem; height: 2rem; background: var(--primary); background-opacity: 0.1;">
                                    <i class="fas fa-map-marker-alt" style="font-size: 1rem; color: var(--primary);"></i>
                                </div>
                                <div>
                                    <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);">주소</p>
                                    <p class="mb-0 fw-medium" style="font-size: 0.875rem; color: var(--foreground);">경기 하남시 더우개로 49</p>
                                </div>
                            </div>
                            <a href="https://map.naver.com/p/search/%ED%95%98%EB%82%A8%EC%A3%BC%EC%82%AC%EB%9E%91%EA%B5%90%ED%9A%8C/place/12980252?c=15.00,0,0,0,dh&placePath=/home?entry=pll&from=map&fromPanelNum=2&timestamp=202509231735&locale=ko&svcName=map_pcv5&searchText=%ED%95%98%EB%82%A8%EC%A3%BC%EC%82%AC%EB%9E%91%EA%B5%90%ED%9A%8C" target="_blank" class="btn btn-outline-primary btn-sm">지도보기</a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 교통편 -->
            <div class="card mb-4" style="border: 1px solid var(--border); border-opacity: 0.5;">
                <div class="card-body p-4">
                    <h3 class="fw-semibold mb-3" style="color: var(--foreground);">교통편</h3>
                    <div class="d-flex flex-column gap-3">
                        <div class="d-flex align-items-center gap-3">
                            <div class="d-flex align-items-center justify-content-center rounded-2" 
                                 style="width: 2rem; height: 2rem; background: var(--secondary); background-opacity: 0.5;">
                                <i class="fas fa-subway" style="font-size: 1rem; color: var(--secondary-foreground);"></i>
                            </div>
                            <div>
                                <p class="fw-medium mb-0" style="font-size: 0.875rem; color: var(--foreground);">지하철</p>
                                <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);">5호선 하남시청역 1번 출구 버스 이용</p>
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-3">
                            <div class="d-flex align-items-center justify-content-center rounded-2" 
                                 style="width: 2rem; height: 2rem; background: var(--secondary); background-opacity: 0.5;">
                                <i class="fas fa-car" style="font-size: 1rem; color: var(--secondary-foreground);"></i>
                            </div>
                            <div>
                                <p class="fw-medium mb-0" style="font-size: 0.875rem; color: var(--foreground);">주차</p>
                                <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);">교회 주차장 이용 가능</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 교역자 연락처 -->
            <div class="card mb-4" style="border: 1px solid var(--border); border-opacity: 0.5;">
                <div class="card-body p-4">
                    <h3 class="fw-semibold mb-3" style="color: var(--foreground);">교역자 연락처</h3>
                    <div class="d-flex flex-column gap-3">
                        <div class="d-flex align-items-center justify-content-between">
                            <div>
                                <p class="fw-medium mb-0" style="font-size: 0.875rem; color: var(--foreground);">박바울 목사</p>
                                <p class="mb-0" style="font-size: 0.75rem; color: var(--muted-foreground);">청년부 담당 목사</p>
                            </div>
                            <a href="tel:02-1234-5679" class="btn btn-outline-primary btn-sm">연락</a>
                        </div>
                        <div class="d-flex align-items-center justify-content-between">
                        </div>
                    </div>
                </div>
            </div>

            
            </div>
        </section>
        </div>

        <!-- 주보 탭 컨텐츠 -->
        <div id="bulletinTab" class="tab-content" style="display: none;">
            <!-- 주보 뷰어 컨텐츠 -->
            <div class="text-center py-5">
                <h3>주보 보기</h3>
                <p>주보를 확인하세요</p>
            </div>
        </div>

        <!-- 일정 탭 컨텐츠 -->
        <div id="calendarTab" class="tab-content" style="display: none;">
            <div class="text-center py-5">
                <h3>일정</h3>
                <p>교회 일정을 확인하세요</p>
            </div>
        </div>

        <!-- 악보 탭 컨텐츠 -->
        <div id="musicTab" class="tab-content" style="display: none;">
            <div class="text-center py-5">
                <h3>악보</h3>
                <p>악보를 확인하세요</p>
                <a href="/sheet-music" class="btn btn-primary">악보 보러가기</a>
            </div>
        </div>

        <!-- 순모임 탭 컨텐츠 -->
        <div id="smallGroupsTab" class="tab-content" style="display: none; min-height: calc(100vh - 120px); padding-bottom: 80px;">
            <!-- 순모임 안내 -->
            <div class="alert alert-info mb-4" style="background: var(--accent); background-opacity: 0.3; border: 1px solid var(--border); border-opacity: 0.5;">
                <div class="d-flex align-items-start gap-3">
                    <div class="flex-shrink-0 d-flex align-items-center justify-content-center rounded-2" 
                         style="width: 2.5rem; height: 2.5rem; background: var(--primary); background-opacity: 0.1;">
                        <i class="fas fa-info-circle" style="color: var(--primary); font-size: 1.25rem;"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h5 class="fw-semibold mb-2" style="color: var(--foreground);">순모임이란?</h5>
                        <p class="mb-0" style="color: var(--muted-foreground); line-height: 1.5;">
                            청년들이 함께 모여 말씀을 나누고 교제하는 소그룹 모임입니다. 
                            매주 정기적으로 만나 서로를 격려하고 신앙을 성장시켜 나갑니다.
                        </p>
                    </div>
                </div>
            </div>

            <!-- 순모임 헤더 -->
            <div class="d-flex align-items-center justify-content-between mb-4">
                <button onclick="switchTab('home')" class="btn btn-outline-secondary d-flex align-items-center gap-2" style="border: 1px solid var(--border); background: transparent; color: var(--foreground);">
                    <i class="fas fa-arrow-left"></i>
                    <span>돌아가기</span>
                </button>
                <h3 class="mb-0" style="color: var(--foreground);">순모임</h3>
                <button onclick="openAddSmallGroupDialog()" class="btn btn-primary btn-sm d-flex align-items-center gap-1">
                    <i class="fas fa-plus"></i>
                    <span>추가</span>
                </button>
            </div>

            <!-- 순모임 목록 -->
            <div id="smallGroupsList" class="d-flex flex-column gap-3">
                <!-- 순모임 목록이 여기에 동적으로 로드됩니다 -->
            </div>

            <!-- 순모임이 없는 경우 -->
            <div id="noSmallGroups" class="text-center py-5" style="display: none;">
                <i class="fas fa-users fa-3x text-muted mb-3"></i>
                <h5 class="text-muted">아직 등록된 순모임이 없습니다</h5>
                <p class="text-muted">첫 번째 순모임을 등록해보세요!</p>
            </div>
        </div>

        <!-- 연락처 탭 컨텐츠 -->
        <div id="contactTab" class="tab-content" style="display: none;">
            <div class="text-center py-5">
                <h3>연락처 & 오시는 길</h3>
                <p>교회 연락처와 위치를 확인하세요</p>
            </div>
        </div>
    </main>

    <!-- 하단 네비게이션 및 새로고침 버튼 -->
    <th:block th:replace="~{fragments/bottom-nav :: bottom-nav}"></th:block>
    <th:block th:replace="~{fragments/bottom-nav :: refresh-btn}"></th:block>

    <!-- 주보 뷰어 -->
    <th:block th:replace="~{fragments/bulletin-viewer :: bulletin-viewer}"></th:block>
    <th:block th:replace="~{fragments/bulletin-viewer :: bulletin-modals}"></th:block>

    <!-- 소식 상세보기 모달 -->
    <div id="announcementViewDialog" class="edit-dialog" style="display: none;">
        <div class="edit-dialog-overlay" onclick="closeAnnouncementViewDialog()"></div>
        <div class="edit-dialog-content">
            <div class="edit-dialog-header">
                <div class="d-flex align-items-start gap-3">
                    <div class="flex-shrink-0 d-flex align-items-center justify-content-center rounded-2" 
                         style="width: 3.5rem; height: 3.5rem; background: var(--primary); background-opacity: 0.1;">
                        <i id="viewAnnouncementIcon" class="fas fa-heart" style="color: var(--primary); font-size: 1.75rem;"></i>
                    </div>
                    <div class="flex-grow-1">
                        <h3 class="edit-dialog-title mb-2" id="viewAnnouncementTitle">새가족 환영식</h3>
                        <div class="d-flex align-items-center gap-2">
                            <span id="viewAnnouncementImportant" class="badge text-white px-2 py-1" 
                                  style="font-size: 0.75rem; background: var(--destructive); display: none;">중요</span>
                            <span id="viewAnnouncementCategory" class="badge px-2 py-1" 
                                  style="font-size: 0.75rem; background: var(--secondary); color: var(--secondary-foreground);">행사</span>
                            <span id="viewAnnouncementDate" class="text-muted" style="font-size: 0.75rem;">2024.03.19</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="edit-dialog-body">
                <p id="viewAnnouncementContent" class="mb-0" style="color: var(--foreground); line-height: 1.6; white-space: pre-wrap;">
                    3월 26일(일) 오후 2시 새가족을 위한 환영식이 있습니다. 많은 참여 부탁드립니다.
                </p>
            </div>
            
            <div class="edit-dialog-footer">
                <button class="btn btn-outline w-100" onclick="closeAnnouncementViewDialog()">닫기</button>
            </div>
        </div>
    </div>

    <!-- 소식 추가/편집 모달 -->
    <div id="announcementDialog" class="edit-dialog" style="display: none;">
        <div class="edit-dialog-overlay" onclick="closeAnnouncementDialog()"></div>
        <div class="edit-dialog-content">
            <div class="edit-dialog-header">
                <h3 class="edit-dialog-title" id="announcementDialogTitle">소식 추가</h3>
                <p class="edit-dialog-description">교회 소식을 추가하거나 수정합니다.</p>
            </div>
            
            <div class="edit-dialog-body">
                <div class="form-group">
                    <label for="announcementTitle" class="form-label">제목</label>
                    <input type="text" id="announcementTitle" class="form-input" placeholder="소식 제목을 입력하세요" required>
                </div>
                
                <div class="form-group">
                    <label for="announcementContent" class="form-label">내용</label>
                    <textarea id="announcementContent" class="form-input" placeholder="소식 내용을 입력하세요" rows="4" required></textarea>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <div class="form-group">
                            <label for="announcementCategory" class="form-label">카테고리</label>
                            <select id="announcementCategory" class="form-input">
                                <option value="행사">행사</option>
                                <option value="기도회">기도회</option>
                                <option value="모임">모임</option>
                                <option value="공지">공지</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group">
                            <label for="announcementIcon" class="form-label">아이콘</label>
                            <select id="announcementIcon" class="form-input">
                                <option value="heart">하트</option>
                                <option value="users">사람들</option>
                                <option value="calendar">달력</option>
                                <option value="bell">종</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="announcementDate" class="form-label">날짜</label>
                    <input type="date" id="announcementDate" class="form-input" required>
                </div>
                
                <div class="form-group">
                    <div class="d-flex align-items-center justify-content-between">
                        <label for="announcementImportant" class="form-label mb-0">중요 소식</label>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="announcementImportant">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="edit-dialog-footer">
                <button class="btn btn-outline" onclick="closeAnnouncementDialog()">취소</button>
                <button class="btn btn-primary" onclick="saveAnnouncement()" id="saveAnnouncementBtn">추가</button>
            </div>
        </div>
    </div>

    <!-- QR 모달 -->
    <div id="qrModal" class="modal" tabindex="-1" style="display: none;">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">디지털 주보</h5>
                    <button type="button" class="btn-close" onclick="closeQRModal()"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center">
                        <h3 class="fw-semibold mb-1" style="color: var(--foreground);">디지털 주보</h3>
                        <p class="mb-3" style="font-size: 0.875rem; color: var(--muted-foreground);">QR 코드를 스캔하여 온라인 주보를 확인하세요</p>
                        
                        <!-- QR 코드 이미지 -->
                        <div class="mb-3" th:if="${qrCodeImage != null}">
                            <img th:src="'data:image/png;base64,' + ${qrCodeImage}" 
                                 alt="QR 코드" 
                                 class="img-fluid rounded shadow-sm" 
                                 style="max-width: 250px; margin: 0 auto;">
                        </div>
                        
                        <!-- QR 코드가 없을 경우 아이콘 표시 -->
                        <div class="d-flex align-items-center justify-content-center rounded-2 mx-auto mb-3" 
                             th:if="${qrCodeImage == null}"
                             style="width: 4rem; height: 4rem; background: var(--primary); background-opacity: 0.1;">
                            <i class="fas fa-qrcode" style="font-size: 2rem; color: var(--primary);"></i>
                        </div>
                        
                        <!-- QR 코드 공유 버튼 -->
                        <button class="btn btn-outline-primary btn-sm" onclick="shareQRCode()">
                            <i class="fas fa-share-alt me-1"></i> 주보 공유하기
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeQRModal()">닫기</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* QR 모달 스타일 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1050;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-dialog {
            max-width: 500px;
            width: 95%;
            margin: 0;
        }

        .modal-content {
            border-radius: 12px;
            border: none;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background: var(--background);
        }

        .modal-header {
            padding: 1.5rem 2rem 1rem 2rem;
            border-bottom: 1px solid var(--border);
            background: var(--background);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--foreground);
            margin: 0;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-footer {
            padding: 1rem 2rem 2rem 2rem;
            border-top: 1px solid var(--border);
        }

        .btn-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--muted-foreground);
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-close::before {
            content: "×";
        }

        .btn-close:hover {
            color: var(--foreground);
        }
        
        /* 순모임 탭 스타일 */
        #smallGroupsTab {
            position: relative;
            z-index: 1;
        }
        
        /* 헤더와 네비게이션바가 항상 보이도록 */
        .header {
            position: relative;
            z-index: 10;
        }
        
        .bottom-nav {
            position: fixed !important;
            bottom: 0 !important;
            left: 0 !important;
            right: 0 !important;
            z-index: 1000 !important;
            transition: opacity 0.3s ease, transform 0.3s ease !important;
        }
        
        /* 네비게이션 숨김 스타일 */
        .bottom-nav.nav-hidden {
            opacity: 0 !important;
            transform: translateY(100%) !important;
            pointer-events: none !important;
        }
        
        .refresh-btn {
            transition: opacity 0.3s ease, transform 0.3s ease !important;
        }
        
        .refresh-btn.nav-hidden {
            opacity: 0 !important;
            transform: scale(0) !important;
            pointer-events: none !important;
        }
        
        /* 메인 컨텐츠 패딩 전환 */
        #mainContent {
            transition: padding-bottom 0.3s ease !important;
        }
        
        /* 네비게이션 숨김 시 body와 main의 하단 여백 제거 */
        body.nav-hidden-mode {
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
        }
        
        body.nav-hidden-mode #mainContent {
            padding-bottom: 0 !important;
            margin-bottom: 0 !important;
        }
        
        body.nav-hidden-mode #mainContent > *:last-child {
            margin-bottom: 0 !important;
            padding-bottom: 0 !important;
        }
    </style>

    <!-- 네비게이션 스크립트 -->
    <th:block th:replace="~{fragments/bottom-nav :: navigation-scripts}"></th:block>
    <th:block th:replace="~{fragments/bulletin-viewer :: bulletin-scripts}"></th:block>
    
    <!-- 페이지 기능 스크립트 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- 홈 페이지 UI 토글 스크립트 -->
    <script>
        // 홈 페이지 UI 토글 기능
        (function() {
            let touchStartX = 0;
            let touchStartY = 0;
            let touchStartTime = 0;
            let isTouchDevice = false;
            
            // 홈 페이지 하단 네비게이션 토글
            window.toggleHomeNav = function() {
                const bottomNav = document.querySelector('.bottom-nav');
                const refreshBtn = document.querySelector('.refresh-btn');
                const mainContent = document.getElementById('mainContent');
                const body = document.body;
                
                if (bottomNav) {
                    bottomNav.classList.toggle('nav-hidden');
                }
                if (refreshBtn) {
                    refreshBtn.classList.toggle('nav-hidden');
                }
                
                // 메인 컨텐츠 하단 패딩 조정
                if (mainContent) {
                    const isHidden = bottomNav && bottomNav.classList.contains('nav-hidden');
                    if (isHidden) {
                        // 네비게이션이 숨겨지면 하단 패딩 완전 제거
                        body.classList.add('nav-hidden-mode');
                        mainContent.classList.remove('pb-5');
                        mainContent.classList.remove('pb-3');
                        mainContent.style.paddingBottom = '0';
                    } else {
                        // 네비게이션이 보이면 원래대로
                        body.classList.remove('nav-hidden-mode');
                        mainContent.classList.add('pb-5');
                        mainContent.style.paddingBottom = '';
                    }
                }
            };
            
            // 메인 컨텐츠 영역에 터치 이벤트 추가
            document.addEventListener('DOMContentLoaded', function() {
                const mainContent = document.getElementById('mainContent');
                
                if (mainContent) {
                    // 터치 시작
                    mainContent.addEventListener('touchstart', (e) => {
                        isTouchDevice = true;
                        touchStartX = e.changedTouches[0].screenX;
                        touchStartY = e.changedTouches[0].screenY;
                        touchStartTime = Date.now();
                    });
                    
                    // 터치 종료
                    mainContent.addEventListener('touchend', (e) => {
                        const touchEndX = e.changedTouches[0].screenX;
                        const touchEndY = e.changedTouches[0].screenY;
                        const touchEndTime = Date.now();
                        
                        const swipeDistance = touchEndX - touchStartX;
                        const verticalDistance = Math.abs(touchEndY - touchStartY);
                        const touchDuration = touchEndTime - touchStartTime;
                        
                        // 짧은 탭으로 인식 (주보 뷰어가 열려있지 않을 때만)
                        const bulletinViewer = document.getElementById('bulletinViewer');
                        const isBulletinOpen = bulletinViewer && bulletinViewer.style.display === 'block';
                        
                        if (!isBulletinOpen && touchDuration < 300 && Math.abs(swipeDistance) < 30 && verticalDistance < 30) {
                            // 버튼이나 링크를 클릭한 경우는 제외
                            const target = e.target;
                            if (!target.closest('button') && !target.closest('a') && !target.closest('input') && !target.closest('textarea')) {
                                window.toggleHomeNav();
                            }
                        }
                    });
                    
                    // 데스크톱 클릭 이벤트
                    mainContent.addEventListener('click', (e) => {
                        if (isTouchDevice) {
                            return;
                        }
                        
                        const bulletinViewer = document.getElementById('bulletinViewer');
                        const isBulletinOpen = bulletinViewer && bulletinViewer.style.display === 'block';
                        
                        if (!isBulletinOpen) {
                            const target = e.target;
                            if (!target.closest('button') && !target.closest('a') && !target.closest('input') && !target.closest('textarea')) {
                                window.toggleHomeNav();
                            }
                        }
                    });
                }
            });
        })();
    </script>
    
    <script>
        // 아코디언 토글 함수
        function toggleSection(contentId) {
            const content = document.getElementById(contentId);
            const icon = document.getElementById(contentId.replace('Content', 'Icon'));
            
            if (content.style.maxHeight === '0px' || content.style.maxHeight === '') {
                // 열기
                content.style.maxHeight = content.scrollHeight + 'px';
                content.style.opacity = '1';
                if (icon) icon.style.transform = 'rotate(180deg)';
            } else {
                // 닫기
                content.style.maxHeight = '0px';
                content.style.opacity = '0';
                if (icon) icon.style.transform = 'rotate(0deg)';
            }
        }
        
        // 페이지 로드 시 모든 섹션을 닫힌 상태로 설정
        document.addEventListener('DOMContentLoaded', function() {
            const accordionContents = document.querySelectorAll('.accordion-content');
            accordionContents.forEach(content => {
                content.style.maxHeight = '0px';
                content.style.opacity = '0';
            });
        });
        
        // 소식 관리 기능
        let currentEditingAnnouncementId = null;
        
        // 소식 상세보기
        async function viewAnnouncement(id) {
            try {
                const response = await fetch(`/api/announcements/${id}`);
                if (!response.ok) {
                    throw new Error('소식을 불러올 수 없습니다.');
                }
                
                const announcement = await response.json();
                
                // 모달에 데이터 설정
                document.getElementById('viewAnnouncementTitle').textContent = announcement.title;
                document.getElementById('viewAnnouncementContent').textContent = announcement.content;
                document.getElementById('viewAnnouncementDate').textContent = announcement.announcementDate;
                
                // 중요도 표시
                const importantBadge = document.getElementById('viewAnnouncementImportant');
                if (announcement.isImportant) {
                    importantBadge.style.display = 'inline-block';
                } else {
                    importantBadge.style.display = 'none';
                }
                
                document.getElementById('announcementViewDialog').style.display = 'flex';
                
            } catch (error) {
                console.error('소식 조회 실패:', error);
                alert('소식을 불러오는데 실패했습니다.');
            }
        }
        
        function closeAnnouncementViewDialog() {
            document.getElementById('announcementViewDialog').style.display = 'none';
        }
        
        function openAddAnnouncementDialog() {
            currentEditingAnnouncementId = null;
            document.getElementById('announcementDialogTitle').textContent = '소식 추가';
            document.getElementById('saveAnnouncementBtn').textContent = '추가';
            
            // 폼 초기화
            document.getElementById('announcementTitle').value = '';
            document.getElementById('announcementContent').value = '';
            document.getElementById('announcementCategory').value = '행사';
            document.getElementById('announcementIcon').value = 'heart';
            document.getElementById('announcementDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('announcementImportant').checked = false;
            
            document.getElementById('announcementDialog').style.display = 'flex';
        }
        
        async function openEditAnnouncementDialog(id) {
            try {
                const response = await fetch(`/api/announcements/${id}`);
                if (!response.ok) {
                    throw new Error('소식을 불러올 수 없습니다.');
                }
                
                const announcement = await response.json();
                
                currentEditingAnnouncementId = id;
                document.getElementById('announcementDialogTitle').textContent = '소식 수정';
                document.getElementById('saveAnnouncementBtn').textContent = '수정';
                
                // 폼에 기존 데이터 설정
                document.getElementById('announcementTitle').value = announcement.title;
                document.getElementById('announcementContent').value = announcement.content;
                document.getElementById('announcementDate').value = announcement.announcementDate;
                document.getElementById('announcementImportant').checked = announcement.isImportant;
                
                document.getElementById('announcementDialog').style.display = 'flex';
                
            } catch (error) {
                console.error('소식 조회 실패:', error);
                alert('소식을 불러오는데 실패했습니다.');
            }
        }
        
        function closeAnnouncementDialog() {
            document.getElementById('announcementDialog').style.display = 'none';
        }
        
        async function saveAnnouncement() {
            const title = document.getElementById('announcementTitle').value;
            const content = document.getElementById('announcementContent').value;
            const date = document.getElementById('announcementDate').value;
            const important = document.getElementById('announcementImportant').checked;
            
            if (!title || !content) {
                alert('제목과 내용을 입력해주세요.');
                return;
            }
            
            try {
                const announcementData = {
                    title: title,
                    content: content,
                    announcementDate: date,
                    isImportant: important,
                    isActive: true,
                    displayOrder: 0,
                    startDate: null,
                    endDate: null
                };
                
                let response;
                if (currentEditingAnnouncementId) {
                    // 수정
                    response = await fetch(`/api/announcements/${currentEditingAnnouncementId}`, {
                        method: 'PUT',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(announcementData)
                    });
                } else {
                    // 추가
                    response = await fetch('/api/announcements', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(announcementData)
                    });
                }
                
                if (!response.ok) {
                    throw new Error('저장에 실패했습니다.');
                }
                
                alert(currentEditingAnnouncementId ? '소식이 수정되었습니다!' : '소식이 추가되었습니다!');
                closeAnnouncementDialog();
                
                // 페이지 새로고침
                setTimeout(() => {
                    location.reload();
                }, 1000);
                
            } catch (error) {
                console.error('소식 저장 실패:', error);
                alert('소식 저장에 실패했습니다.');
            }
        }
        
        async function deleteAnnouncement(id) {
            if (confirm('이 소식을 삭제하시겠습니까?')) {
                try {
                    const response = await fetch(`/api/announcements/${id}`, {
                        method: 'DELETE'
                    });
                    
                    if (!response.ok) {
                        throw new Error('삭제에 실패했습니다.');
                    }
                    
                    alert('소식이 삭제되었습니다!');
                    
                    // 페이지 새로고침
                    setTimeout(() => {
                        location.reload();
                    }, 1000);
                    
                } catch (error) {
                    console.error('소식 삭제 실패:', error);
                    alert('소식 삭제에 실패했습니다.');
                }
            }
        }
    </script>
</body>
</html>
